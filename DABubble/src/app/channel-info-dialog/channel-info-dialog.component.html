<h2 class="dialog-title">
  <mat-icon>tag</mat-icon>
  {{ name }}
  <button
    mat-icon-button
    class="close-button"
    (click)="cancel()"
    matTooltip="Dialog schließen"
    aria-label="Dialog schließen"
  >
    <mat-icon>close</mat-icon>
  </button>
</h2>

<!-- Channel-Name -->
<div class="info-card">
  <div class="info-header">
    <span class="info-label">Channel-Name</span>
    <button
      *ngIf="!isSystemChannel && !editMode"
      mat-button
      (click)="editMode = true"
      matTooltip="Channel-Namen bearbeiten"
      aria-label="Channel-Namen bearbeiten"
    >
      Bearbeiten
    </button>
  </div>
  <div *ngIf="!editMode">{{ name }}</div>
  <mat-form-field *ngIf="editMode" appearance="fill" class="full-width">
    <input matInput [(ngModel)]="name" />
  </mat-form-field>
</div>

<!-- Beschreibung -->
<div class="info-card">
  <div class="info-header">
    <span class="info-label">Beschreibung</span>
    <button
      *ngIf="!isSystemChannel && !editMode"
      mat-button
      (click)="editMode = true"
      matTooltip="Beschreibung bearbeiten"
      aria-label="Beschreibung bearbeiten"
    >
      Bearbeiten
    </button>
  </div>
  <div *ngIf="!editMode">{{ description }}</div>
  <mat-form-field *ngIf="editMode" appearance="fill" class="full-width">
    <textarea matInput [(ngModel)]="description" rows="3"></textarea>
  </mat-form-field>
</div>

<!-- Erstellt von -->
<div class="info-card">
  <span class="info-label">Erstellt von</span>
  <div class="creator-name">{{ createdBy }}</div>
</div>

<!-- Mitglieder -->
<!-- Mitglieder -->
<div class="info-card">
  <span class="info-label">Mitglieder</span>
  <div class="members">
    <div
      class="member"
      *ngFor="let member of members"
      [class.self]="member.name === currentUser.name"
    >
      <img [src]="member.avatar || 'assets/unknown.png'" alt="{{ member.name }}" />
      <span class="name">
        {{ member.name }}
        <span *ngIf="member.name === currentUser.name">(Du)</span>
      </span>
      <span class="status-dot" *ngIf="isUserOnline(member.name)"></span>
    </div>

    <div class="add-member" (click)="openMemberDialog()">
      <mat-icon>person_add</mat-icon>
      Mitglieder hinzufügen
    </div>
  </div>
</div>



<!-- Aktionen -->
<div class="actions">
  <button
    mat-button
    (click)="cancel()"
    matTooltip="Änderungen verwerfen"
    aria-label="Abbrechen"
  >
    Abbrechen
  </button>

  <button
    *ngIf="editMode && !isSystemChannel"
    mat-flat-button
    color="primary"
    (click)="saveChanges()"
    matTooltip="Änderungen speichern"
    aria-label="Speichern"
  >
    Speichern
  </button>

  <button
    mat-flat-button
    color="warn"
    class="leave-button"
    (click)="leaveChannel()"
    matTooltip="Diesen Channel verlassen"
    aria-label="Channel verlassen"
  >
    Channel verlassen
  </button>
</div>
