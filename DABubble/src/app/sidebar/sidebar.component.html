<div class="sidebar-scroll-area">
<div class="sidebar-header">
  <img
    src="../../assets/Dev.png"
    alt="Logo"
    class="logo"
    matTooltip="Zur Startseite"
  />
  <span class="brand-name">Devspace</span>

  <!-- Edit-Icon f√ºr Desktop -->
  <mat-icon
    class="edit-icon desktop-only"
    (click)="openNewMessageDialog()"
    matTooltip="Neue Nachricht starten"
  >
    edit_square
  </mat-icon>
</div>

<!-- üì¶ Channel-Bereich -->
<div class="section">
  <h3 (click)="toggleChannels()" matTooltip="Channels ein-/ausklappen">
    <mat-icon class="toggle-icon">
      {{ showChannels ? 'expand_more' : 'chevron_right' }}
    </mat-icon>
    <mat-icon class="section-icon">group_work</mat-icon>
    Channels
    <span
      class="add-icon"
      (click)="openChannelDialog(); $event.stopPropagation()"
      matTooltip="Neuen Channel erstellen"
    >
      <mat-icon>add</mat-icon>
    </span>
  </h3>

  <mat-nav-list *ngIf="showChannels">
    <mat-list-item
      *ngFor="let channel of channels"
      class="channel-item"
      (click)="selectChannelOnly(channel)"
    >
      <mat-icon matListIcon>tag</mat-icon>
      <span>{{ channel.name }}</span>
    </mat-list-item>

    <mat-list-item
      class="add-channel"
      (click)="openChannelDialog()"
      matTooltip="Channel hinzuf√ºgen"
    >
      <mat-icon matListIcon>add_circle_outline</mat-icon>
      <span>Channel hinzuf√ºgen</span>
    </mat-list-item>
  </mat-nav-list>
</div>

<!-- üë• Direktnachrichten -->
<div class="section">
  <h3 (click)="toggleDMs()" matTooltip="Direktnachrichten ein-/ausklappen">
    <mat-icon class="toggle-icon">
      {{ showDMs ? 'expand_more' : 'chevron_right' }}
    </mat-icon>
    <mat-icon class="section-icon">person</mat-icon>
    Direktnachrichten
  </h3>

  <mat-nav-list *ngIf="showDMs">
<mat-list-item *ngFor="let user of users" (click)="selectUser(user)">
  <div class="user-entry">
    <div class="avatar-wrapper">
      <img [src]="user.avatar" class="avatar" alt="avatar" />
      <span
        class="status-dot"
        [ngClass]="{ 'offline': !user.isOnline }"
        [matTooltip]="user.isOnline ? 'Online' : 'Offline'"
      ></span>
    </div>
    <span class="username">
      {{ user.id === currentUser.id ? user.name + ' (Du)' : user.name }}
    </span>
  </div>
</mat-list-item>

  </mat-nav-list>
</div>

<!-- ‚úèÔ∏è Floating Edit-Button (nur Mobile) -->
<button
  class="fab-edit mobile-only"
  (click)="openNewMessageDialog()"
  matTooltip="Neue Nachricht"
>
  <mat-icon>edit</mat-icon>
</button>
</div>